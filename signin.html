<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/21c38a1c2f.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./styles/navbar.css">
    <link rel="stylesheet" href="./styles/footer.css">
    <link rel="stylesheet" href="./styles/signin.css">
    <title>SHOP.COM - Online Shopping Marketplace: Cloths,Shoes,Beauty,Fashion...</title>
</head>

<body>
    <div id="top"></div>
    <div id="whole_in">
           <div id="signin">
        <h1>Sign in</h1>
        <form id="sign_box" onsubmit="Login(event)">
            <label>Email address:</label>
            <input type="email" id="email" placeholder="yourname@example.com.com">
            <label>Password:</label>
            <input type="password" id="password" placeholder="Please enter your password">
            <a href="http://example.com" id="forgot">Forgot your Password?</a>
            <input id="sign_btn" type="submit" value="Sign In">
        </form>
    </div> 
    <div id="tosign_up">
        <p id="signup-p">Don't have an account?</p>
        <p>With a SHOP.COM account, you can enjoy the following benefits: up to 50% Cashback on eligible purchases, redeem discount coupons, order status and history, saved payment options and addresses, exclusive emails and more. Learn more</p>
        <button id="signup_btn" onclick="goToSignup()">Create Your new account</button>
    </div>
    </div>
<div id="bottom"></div>
</body>
</html>
<script type="module">
    import navbar from "./components/navbar.js"
    import footer from "./components/footer.js"
    let nav = document.getElementById("top");
    nav.innerHTML = navbar()
  document.getElementById("homelogo").addEventListener("click",homePage)


    function homePage(){
        window.location.href="landing.html"
    }



    let foot = document.getElementById("bottom");
    foot.innerHTML = footer()
     </script>
     <script>
function goToSignup(){
    window.location.href="signup.html"
}
     </script>

<script>

let userDetails=[];

async function Login(event){
try{
    event.preventDefault();
 var logdata={
        email:document.getElementById("email").value,
        password:document.getElementById("password").value,
        },
        logdata=JSON.stringify(logdata);
        console.log("log_data:",logdata);
        
}catch(error){
    console.log("error:",error);
}


    let logapi="http://localhost:3000/login";
        var res=await fetch(logapi,{
            method:`POST` ,
            body:logdata,
            headers:{
                "Content-Type":'application/json',
            },
        })
        console.log("response:",res.status);
        if(res.status==400){
            alert("Invalid Email or Password")
        }
        else{
        let data=await res.json();
        console.log("data:",data.user);
// let username=document.getElementById("log-user").value;
// getUser(username,data.token,data.error);
// }catch(err){
//     console.log("err:",err);
// }
localStorage.setItem("userDetails",JSON.stringify(data.user));
window.location.href="landing.html"
}
}

</script>    